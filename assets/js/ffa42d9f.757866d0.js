/*! For license information please see ffa42d9f.757866d0.js.LICENSE.txt */
"use strict";(self.webpackChunkbackstage_microsite=self.webpackChunkbackstage_microsite||[]).push([[216296],{603905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>d});var r=n(667294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=r.createContext({}),u=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},s=function(e){var t=u(e.components);return r.createElement(c.Provider,{value:t},e.children)},p="mdxType",f={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,c=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),p=u(n),m=o,d=p["".concat(c,".").concat(m)]||p[m]||f[m]||i;return n?r.createElement(d,a(a({ref:t},s),{},{components:n})):r.createElement(d,a({ref:t},s))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,a=new Array(i);a[0]=m;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[p]="string"==typeof e?e:o,a[1]=l;for(var u=2;u<i;u++)a[u]=n[u];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},79070:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>l,default:()=>f,frontMatter:()=>a,metadata:()=>c,toc:()=>s});n(827378);var r=n(603905);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const a={id:"builtin-actions",title:"Builtin actions",description:"Documentation describing the built-in template actions."},l=void 0,c={unversionedId:"features/software-templates/builtin-actions",id:"features/software-templates/builtin-actions",title:"Builtin actions",description:"Documentation describing the built-in template actions.",source:"@site/../docs/features/software-templates/builtin-actions.md",sourceDirName:"features/software-templates",slug:"/features/software-templates/builtin-actions",permalink:"/docs/features/software-templates/builtin-actions",draft:!1,editUrl:"https://github.com/backstage/backstage/edit/master/docs/../docs/features/software-templates/builtin-actions.md",tags:[],version:"current",frontMatter:{id:"builtin-actions",title:"Builtin actions",description:"Documentation describing the built-in template actions."},sidebar:"docs",previous:{title:"Input Examples",permalink:"/docs/features/software-templates/input-examples"},next:{title:"Writing Custom Actions",permalink:"/docs/features/software-templates/writing-custom-actions"}},u={},s=[{value:"Migrating from <code>fetch:cookiecutter</code> to <code>fetch:template</code>",id:"migrating-from-fetchcookiecutter-to-fetchtemplate",level:2},{value:"Using <code>cookiecutterCompat</code> mode",id:"using-cookiecuttercompat-mode",level:3},{value:"Manual migration",id:"manual-migration",level:3}],p={toc:s};function f(e){var{components:t}=e,n=i(e,["components"]);return(0,r.kt)("wrapper",o({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"The scaffolder comes with several built-in actions for fetching content,\nregistering in the catalog and of course actions for creating and publishing a\ngit repository."),(0,r.kt)("p",null,"There are several repository providers supported out of the box such as GitHub,\nAzure, GitLab and Bitbucket."),(0,r.kt)("p",null,"A list of all registered actions can be found under ",(0,r.kt)("inlineCode",{parentName:"p"},"/create/actions"),". For local\ndevelopment you should be able to reach them at\n",(0,r.kt)("inlineCode",{parentName:"p"},"http://localhost:3000/create/actions"),"."),(0,r.kt)("h2",o({},{id:"migrating-from-fetchcookiecutter-to-fetchtemplate"}),"Migrating from ",(0,r.kt)("inlineCode",{parentName:"h2"},"fetch:cookiecutter")," to ",(0,r.kt)("inlineCode",{parentName:"h2"},"fetch:template")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"fetch:template")," action is a new action with a similar API to\n",(0,r.kt)("inlineCode",{parentName:"p"},"fetch:cookiecutter")," but no dependency on ",(0,r.kt)("inlineCode",{parentName:"p"},"cookiecutter"),". There are two options\nfor migrating templates that use ",(0,r.kt)("inlineCode",{parentName:"p"},"fetch:cookiecutter")," to use ",(0,r.kt)("inlineCode",{parentName:"p"},"fetch:template"),":"),(0,r.kt)("h3",o({},{id:"using-cookiecuttercompat-mode"}),"Using ",(0,r.kt)("inlineCode",{parentName:"h3"},"cookiecutterCompat")," mode"),(0,r.kt)("p",null,"The new ",(0,r.kt)("inlineCode",{parentName:"p"},"fetch:template")," action has a ",(0,r.kt)("inlineCode",{parentName:"p"},"cookiecutterCompat")," flag which should\nallow most templates built for ",(0,r.kt)("inlineCode",{parentName:"p"},"fetch:cookiecutter")," to work without any changes."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Update action name in ",(0,r.kt)("inlineCode",{parentName:"li"},"template.yaml"),". The name should be changed from\n",(0,r.kt)("inlineCode",{parentName:"li"},"fetch:cookiecutter")," to ",(0,r.kt)("inlineCode",{parentName:"li"},"fetch:template"),"."),(0,r.kt)("li",{parentName:"ol"},"Set ",(0,r.kt)("inlineCode",{parentName:"li"},"cookiecutterCompat")," to ",(0,r.kt)("inlineCode",{parentName:"li"},"true")," in the ",(0,r.kt)("inlineCode",{parentName:"li"},"fetch:template")," step input in\n",(0,r.kt)("inlineCode",{parentName:"li"},"template.yaml"),".")),(0,r.kt)("pre",null,(0,r.kt)("code",o({parentName:"pre"},{className:"language-diff"}),"  steps:\n    - id: fetch-base\n      name: Fetch Base\n-     action: fetch:cookiecutter\n+     action: fetch:template\n      input:\n        url: ./skeleton\n+       cookiecutterCompat: true\n        values:\n")),(0,r.kt)("h3",o({},{id:"manual-migration"}),"Manual migration"),(0,r.kt)("p",null,"If you prefer, you can manually migrate your templates to avoid the need for\nenabling cookiecutter compatibility mode, which will result in slightly less\nverbose template variables expressions."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Update action name in ",(0,r.kt)("inlineCode",{parentName:"li"},"template.yaml"),". The name should be changed from\n",(0,r.kt)("inlineCode",{parentName:"li"},"fetch:cookiecutter")," to ",(0,r.kt)("inlineCode",{parentName:"li"},"fetch:template"),"."),(0,r.kt)("li",{parentName:"ol"},"Update variable syntax in file names and content. ",(0,r.kt)("inlineCode",{parentName:"li"},"fetch:cookiecutter"),"\nexpects variables to be enclosed in ",(0,r.kt)("inlineCode",{parentName:"li"},"{{")," ",(0,r.kt)("inlineCode",{parentName:"li"},"}}")," and prefixed with\n",(0,r.kt)("inlineCode",{parentName:"li"},"cookiecutter."),", while ",(0,r.kt)("inlineCode",{parentName:"li"},"fetch:template")," expects variables to be enclosed in\n",(0,r.kt)("inlineCode",{parentName:"li"},"${{")," ",(0,r.kt)("inlineCode",{parentName:"li"},"}}")," and prefixed with ",(0,r.kt)("inlineCode",{parentName:"li"},"values."),". For example, a reference to variable\n",(0,r.kt)("inlineCode",{parentName:"li"},"myInputVariable")," would need to be migrated from\n",(0,r.kt)("inlineCode",{parentName:"li"},"{{ cookiecutter.myInputVariable }}")," to ",(0,r.kt)("inlineCode",{parentName:"li"},"${{ values.myInputVariable }}"),"."),(0,r.kt)("li",{parentName:"ol"},"Replace uses of ",(0,r.kt)("inlineCode",{parentName:"li"},"jsonify")," with ",(0,r.kt)("inlineCode",{parentName:"li"},"dump"),". The\n",(0,r.kt)("a",o({parentName:"li"},{href:"https://cookiecutter.readthedocs.io/en/latest/advanced/template_extensions.html#jsonify-extension"}),(0,r.kt)("inlineCode",{parentName:"a"},"jsonify")," filter"),"\nis built in to ",(0,r.kt)("inlineCode",{parentName:"li"},"cookiecutter"),", and is not available by default when using\n",(0,r.kt)("inlineCode",{parentName:"li"},"fetch:template"),". The\n",(0,r.kt)("a",o({parentName:"li"},{href:"https://mozilla.github.io/nunjucks/templating.html#dump"}),(0,r.kt)("inlineCode",{parentName:"a"},"dump")," filter")," is\nthe equivalent filter in nunjucks, so an expression like\n",(0,r.kt)("inlineCode",{parentName:"li"},"{{ cookiecutter.myAwesomeList | jsonify }}")," should be migrated to\n",(0,r.kt)("inlineCode",{parentName:"li"},"${{ values.myAwesomeList | dump }}"),".")))}f.isMDXComponent=!0},862525:e=>{var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(o){return!1}}()?Object.assign:function(e,i){for(var a,l,c=o(e),u=1;u<arguments.length;u++){for(var s in a=Object(arguments[u]))n.call(a,s)&&(c[s]=a[s]);if(t){l=t(a);for(var p=0;p<l.length;p++)r.call(a,l[p])&&(c[l[p]]=a[l[p]])}}return c}},541535:(e,t,n)=>{var r=n(862525),o=60103,i=60106;var a=60109,l=60110,c=60112;var u=60115,s=60116;if("function"==typeof Symbol&&Symbol.for){var p=Symbol.for;o=p("react.element"),i=p("react.portal"),p("react.fragment"),p("react.strict_mode"),p("react.profiler"),a=p("react.provider"),l=p("react.context"),c=p("react.forward_ref"),p("react.suspense"),u=p("react.memo"),s=p("react.lazy")}var f="function"==typeof Symbol&&Symbol.iterator;function m(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h={};function y(e,t,n){this.props=e,this.context=t,this.refs=h,this.updater=n||d}function b(){}function k(e,t,n){this.props=e,this.context=t,this.refs=h,this.updater=n||d}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(m(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var g=k.prototype=new b;g.constructor=k,r(g,y.prototype),g.isPureReactComponent=!0;var v={current:null},w=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function O(e,t,n){var r,i={},a=null,l=null;if(null!=t)for(r in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(a=""+t.key),t)w.call(t,r)&&!C.hasOwnProperty(r)&&(i[r]=t[r]);var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){for(var u=Array(c),s=0;s<c;s++)u[s]=arguments[s+2];i.children=u}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===i[r]&&(i[r]=c[r]);return{$$typeof:o,type:e,key:a,ref:l,props:i,_owner:v.current}}function j(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var N=/\/+/g;function x(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function P(e,t,n,r,a){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var c=!1;if(null===e)c=!0;else switch(l){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case o:case i:c=!0}}if(c)return a=a(c=e),e=""===r?"."+x(c,0):r,Array.isArray(a)?(n="",null!=e&&(n=e.replace(N,"$&/")+"/"),P(a,t,n,"",(function(e){return e}))):null!=a&&(j(a)&&(a=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,n+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(N,"$&/")+"/")+e)),t.push(a)),1;if(c=0,r=""===r?".":r+":",Array.isArray(e))for(var u=0;u<e.length;u++){var s=r+x(l=e[u],u);c+=P(l,t,n,s,a)}else if(s=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"==typeof s)for(e=s.call(e),u=0;!(l=e.next()).done;)c+=P(l=l.value,t,n,s=r+x(l,u++),a);else if("object"===l)throw t=""+e,Error(m(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return c}function _(e,t,n){if(null==e)return e;var r=[],o=0;return P(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function S(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var T={current:null};function E(){var e=T.current;if(null===e)throw Error(m(321));return e}},827378:(e,t,n)=>{n(541535)}}]);