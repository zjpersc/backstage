/*! For license information please see f3f86ad4.4e805737.js.LICENSE.txt */
"use strict";(self.webpackChunkbackstage_microsite=self.webpackChunkbackstage_microsite||[]).push([[979694],{603905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>g});var o=n(667294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),c=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=c(e.components);return o.createElement(s.Provider,{value:t},e.children)},p="mdxType",f={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(n),d=r,g=p["".concat(s,".").concat(d)]||p[d]||f[d]||a;return n?o.createElement(g,i(i({ref:t},u),{},{components:n})):o.createElement(g,i({ref:t},u))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:r,i[1]=l;for(var c=2;c<a;c++)i[c]=n[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},809576:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>f,frontMatter:()=>i,metadata:()=>s,toc:()=>u});n(827378);var o=n(603905);function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r.apply(this,arguments)}function a(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const i={id:"configuration",title:"Catalog Configuration",description:"Documentation on Software Catalog Configuration"},l=void 0,s={unversionedId:"features/software-catalog/configuration",id:"features/software-catalog/configuration",title:"Catalog Configuration",description:"Documentation on Software Catalog Configuration",source:"@site/../docs/features/software-catalog/configuration.md",sourceDirName:"features/software-catalog",slug:"/features/software-catalog/configuration",permalink:"/docs/features/software-catalog/configuration",draft:!1,editUrl:"https://github.com/backstage/backstage/edit/master/docs/../docs/features/software-catalog/configuration.md",tags:[],version:"current",frontMatter:{id:"configuration",title:"Catalog Configuration",description:"Documentation on Software Catalog Configuration"},sidebar:"docs",previous:{title:"The Life of an Entity",permalink:"/docs/features/software-catalog/life-of-an-entity"},next:{title:"System Model",permalink:"/docs/features/software-catalog/system-model"}},c={},u=[{value:"Processors",id:"processors",level:2},{value:"Static Location Configuration",id:"static-location-configuration",level:3},{value:"Integration Processors",id:"integration-processors",level:3},{value:"Custom Processors",id:"custom-processors",level:3},{value:"Catalog Rules",id:"catalog-rules",level:2},{value:"Readonly mode",id:"readonly-mode",level:2}],p={toc:u};function f(e){var{components:t}=e,n=a(e,["components"]);return(0,o.kt)("wrapper",r({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",r({},{id:"processors"}),"Processors"),(0,o.kt)("p",null,"The catalog has a concept of ",(0,o.kt)("em",{parentName:"p"},"processors")," to perform catalog ingestion tasks,\nsuch as reading raw entity data from a remote source, parsing it, transforming\nit, and validating it. These processors are configured under the\n",(0,o.kt)("inlineCode",{parentName:"p"},"catalog.processors")," configuration key."),(0,o.kt)("h3",r({},{id:"static-location-configuration"}),"Static Location Configuration"),(0,o.kt)("p",null,"The simplest configuration for the catalog, as shown in the default\n",(0,o.kt)("inlineCode",{parentName:"p"},"@backstage/create-app")," template, is to declaratively add locations pointing to\nYAML files with ",(0,o.kt)("a",r({parentName:"p"},{href:"/docs/conf/"}),"static configuration"),"."),(0,o.kt)("p",null,"Locations are added to the catalog under the ",(0,o.kt)("inlineCode",{parentName:"p"},"catalog.locations")," key:"),(0,o.kt)("pre",null,(0,o.kt)("code",r({parentName:"pre"},{className:"language-yaml"}),"catalog:\n  locations:\n    - type: url\n      target: https://github.com/backstage/backstage/blob/master/packages/catalog-model/examples/components/artist-lookup-component.yaml\n")),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"url")," type locations are handled by a standard processor included with the\ncatalog (",(0,o.kt)("inlineCode",{parentName:"p"},"UrlReaderProcessor"),"), so no processor configuration is needed. This\nprocessor ",(0,o.kt)("em",{parentName:"p"},"does however")," need an ",(0,o.kt)("a",r({parentName:"p"},{href:"/docs/integrations/"}),"integration")," to\nunderstand how to retrieve a given URL. For the example above, you would need to\nconfigure the ",(0,o.kt)("a",r({parentName:"p"},{href:"/docs/integrations/github/locations"}),"GitHub integration")," to\nread files from github.com."),(0,o.kt)("p",null,"The locations added through static configuration cannot be removed through the\ncatalog locations API. To remove these locations, you must remove them from the\nconfiguration."),(0,o.kt)("p",null,"Syntax errors or other types of errors present in ",(0,o.kt)("inlineCode",{parentName:"p"},"catalog-info.yaml")," files will\nbe logged for investigation. Errors do not cause processing to abort."),(0,o.kt)("p",null,"When multiple ",(0,o.kt)("inlineCode",{parentName:"p"},"catalog-info.yaml")," files with the same ",(0,o.kt)("inlineCode",{parentName:"p"},"metadata.name")," property\nare discovered, one will be processed and all others will be skipped. This\naction is logged for further investigation."),(0,o.kt)("h3",r({},{id:"integration-processors"}),"Integration Processors"),(0,o.kt)("p",null,"Integrations may simply provide a mechanism to handle ",(0,o.kt)("inlineCode",{parentName:"p"},"url")," location type for an\nexternal provider, or they may also include additional processors out of the\nbox, such as the GitHub ",(0,o.kt)("a",r({parentName:"p"},{href:"/docs/integrations/github/discovery"}),"discovery"),"\nprocessor that scans a GitHub organization for\n",(0,o.kt)("a",r({parentName:"p"},{href:"/docs/features/software-catalog/descriptor-format"}),"entity descriptor files"),"."),(0,o.kt)("p",null,"Check the ",(0,o.kt)("a",r({parentName:"p"},{href:"/docs/integrations/"}),"integrations")," documentation to see what\nis offered by each integration."),(0,o.kt)("h3",r({},{id:"custom-processors"}),"Custom Processors"),(0,o.kt)("p",null,"To ingest entities from an existing system already tracking software, you can\nalso write a ",(0,o.kt)("em",{parentName:"p"},"custom processor")," to convert between the existing system and\nBackstage's descriptor format. This is documented in\n",(0,o.kt)("a",r({parentName:"p"},{href:"/docs/features/software-catalog/external-integrations"}),"External Integrations"),"."),(0,o.kt)("h2",r({},{id:"catalog-rules"}),"Catalog Rules"),(0,o.kt)("p",null,"By default the catalog will only allow ingestion of entities with the kind\n",(0,o.kt)("inlineCode",{parentName:"p"},"Component"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"API")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"Location"),". In order to allow entities of other kinds to\nbe added, you need to add rules to the catalog. Rules are added either in a\nseparate ",(0,o.kt)("inlineCode",{parentName:"p"},"catalog.rules")," key, or added to statically configured locations."),(0,o.kt)("p",null,"For example, given the following configuration:"),(0,o.kt)("pre",null,(0,o.kt)("code",r({parentName:"pre"},{className:"language-yaml"}),"catalog:\n  rules:\n    - allow: [Component, API, Location, Template]\n\n  locations:\n    - type: url\n      target: https://github.com/org/example/blob/master/org-data.yaml\n      rules:\n        - allow: [Group]\n")),(0,o.kt)("p",null,"We are able to add entities of kind ",(0,o.kt)("inlineCode",{parentName:"p"},"Component"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"API"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"Location"),", or\n",(0,o.kt)("inlineCode",{parentName:"p"},"Template")," from any location, and ",(0,o.kt)("inlineCode",{parentName:"p"},"Group")," entities from the ",(0,o.kt)("inlineCode",{parentName:"p"},"org-data.yaml"),",\nwhich will also be read as statically configured location."),(0,o.kt)("p",null,"Note that if the ",(0,o.kt)("inlineCode",{parentName:"p"},"catalog.rules")," key is present it will replace the default\nvalue, meaning that you need to add rules for the default kinds if you want\nthose to still be allowed."),(0,o.kt)("p",null,"The following configuration will reject any kind of entities from being added to\nthe catalog:"),(0,o.kt)("pre",null,(0,o.kt)("code",r({parentName:"pre"},{className:"language-yaml"}),"catalog:\n  rules: []\n")),(0,o.kt)("h2",r({},{id:"readonly-mode"}),"Readonly mode"),(0,o.kt)("p",null,"Processors provides a good way to automate ingestion of entities when combined\nwith ",(0,o.kt)("a",r({parentName:"p"},{href:"#static-location-configuration"}),"Static Location Configuration")," or a\ndiscovery processor like\n",(0,o.kt)("a",r({parentName:"p"},{href:"/docs/integrations/github/discovery"}),"GitHub Discovery"),". To enforce usage of\nprocessors to locate entities we can configure the catalog into ",(0,o.kt)("inlineCode",{parentName:"p"},"readonly")," mode.\nThis configuration disables registering and deleting locations with the catalog APIs."),(0,o.kt)("pre",null,(0,o.kt)("code",r({parentName:"pre"},{className:"language-yaml"}),"catalog:\n  readonly: true\n")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"Note that any plugin relying on the catalog API for creating, updating and\ndeleting entities will not work in this mode."))),(0,o.kt)("p",null,"Deleting an entity by UUID, ",(0,o.kt)("inlineCode",{parentName:"p"},"DELETE /entities/by-uid/:uid"),", is allowed when using this mode. It may be rediscovered as noted in ",(0,o.kt)("a",r({parentName:"p"},{href:"/docs/features/software-catalog/life-of-an-entity#explicit-deletion"}),"explicit deletion"),"."),(0,o.kt)("p",null,"A common use case for this configuration is when organizations have a remote\nsource that should be mirrored into Backstage. To make Backstage a mirror of\nthis remote source, users cannot also register new entities with e.g. the\n",(0,o.kt)("a",r({parentName:"p"},{href:"https://github.com/backstage/backstage/tree/master/plugins/catalog-import"}),"catalog-import"),"\nplugin."))}f.isMDXComponent=!0},862525:e=>{var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function r(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach((function(e){o[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(r){return!1}}()?Object.assign:function(e,a){for(var i,l,s=r(e),c=1;c<arguments.length;c++){for(var u in i=Object(arguments[c]))n.call(i,u)&&(s[u]=i[u]);if(t){l=t(i);for(var p=0;p<l.length;p++)o.call(i,l[p])&&(s[l[p]]=i[l[p]])}}return s}},541535:(e,t,n)=>{var o=n(862525),r=60103,a=60106;var i=60109,l=60110,s=60112;var c=60115,u=60116;if("function"==typeof Symbol&&Symbol.for){var p=Symbol.for;r=p("react.element"),a=p("react.portal"),p("react.fragment"),p("react.strict_mode"),p("react.profiler"),i=p("react.provider"),l=p("react.context"),s=p("react.forward_ref"),p("react.suspense"),c=p("react.memo"),u=p("react.lazy")}var f="function"==typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function h(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||g}function y(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||g}h.prototype.isReactComponent={},h.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},h.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=h.prototype;var b=k.prototype=new y;b.constructor=k,o(b,h.prototype),b.isPureReactComponent=!0;var v={current:null},w=Object.prototype.hasOwnProperty,O={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,n){var o,a={},i=null,l=null;if(null!=t)for(o in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(i=""+t.key),t)w.call(t,o)&&!O.hasOwnProperty(o)&&(a[o]=t[o]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var c=Array(s),u=0;u<s;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(o in s=e.defaultProps)void 0===a[o]&&(a[o]=s[o]);return{$$typeof:r,type:e,key:i,ref:l,props:a,_owner:v.current}}function N(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}var j=/\/+/g;function P(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function x(e,t,n,o,i){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var s=!1;if(null===e)s=!0;else switch(l){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case r:case a:s=!0}}if(s)return i=i(s=e),e=""===o?"."+P(s,0):o,Array.isArray(i)?(n="",null!=e&&(n=e.replace(j,"$&/")+"/"),x(i,t,n,"",(function(e){return e}))):null!=i&&(N(i)&&(i=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(j,"$&/")+"/")+e)),t.push(i)),1;if(s=0,o=""===o?".":o+":",Array.isArray(e))for(var c=0;c<e.length;c++){var u=o+P(l=e[c],c);s+=x(l,t,n,u,i)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),c=0;!(l=e.next()).done;)s+=x(l=l.value,t,n,u=o+P(l,c++),i);else if("object"===l)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function S(e,t,n){if(null==e)return e;var o=[],r=0;return x(e,o,"","",(function(e){return t.call(n,e,r++)})),o}function T(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var _={current:null};function E(){var e=_.current;if(null===e)throw Error(d(321));return e}},827378:(e,t,n)=>{n(541535)}}]);