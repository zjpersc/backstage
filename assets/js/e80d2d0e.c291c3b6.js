/*! For license information please see e80d2d0e.c291c3b6.js.LICENSE.txt */
"use strict";(self.webpackChunkbackstage_microsite=self.webpackChunkbackstage_microsite||[]).push([[291e3],{603905:(e,t,r)=>{r.d(t,{Zo:()=>l,kt:()=>h});var n=r(667294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var c=n.createContext({}),u=function(e){var t=n.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},l=function(e){var t=u(e.components);return n.createElement(c.Provider,{value:t},e.children)},p="mdxType",f={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),p=u(r),d=a,h=p["".concat(c,".").concat(d)]||p[d]||f[d]||o;return r?n.createElement(h,i(i({ref:t},l),{},{components:r})):n.createElement(h,i({ref:t},l))}));function h(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[p]="string"==typeof e?e:a,i[1]=s;for(var u=2;u<o;u++)i[u]=r[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},28505:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/files/X41-Backstage-Audit-2022-b044511592e4aa41dcdf6820dc7882e8.pdf"},441721:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>u,contentTitle:()=>s,default:()=>f,frontMatter:()=>i,metadata:()=>c,toc:()=>l});r(827378);var n=r(603905);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a.apply(this,arguments)}function o(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}const i={title:"Backstage Security Audit & Updates",author:"Patrik Oldsberg, Spotify",authorURL:"https://github.com/Rugvip"},s=void 0,c={permalink:"/blog/2022/08/23/backstage-security-audit",source:"@site/../microsite/blog/2022-08-23-backstage-security-audit.md",title:"Backstage Security Audit & Updates",description:"TL;DR Backstage\u2019s security posture continues to mature! Today, we\u2019re releasing a report from an independent security audit and the first version of the Backstage Threat Model.",date:"2022-08-23T00:00:00.000Z",formattedDate:"August 23, 2022",tags:[],readingTime:3.845,hasTruncateMarker:!0,authors:[{name:"Patrik Oldsberg, Spotify",url:"https://github.com/Rugvip"}],frontMatter:{title:"Backstage Security Audit & Updates",author:"Patrik Oldsberg, Spotify",authorURL:"https://github.com/Rugvip"},prevItem:{title:"FYI \ud83d\udce3 The Plugin Analytics API",permalink:"/blog/2022/09/08/fyi-plugin-analytics-api"},nextItem:{title:"Releasing Backstage Search 1.0",permalink:"/blog/2022/07/19/releasing-backstage-search-1.0"}},u={authorsImageUrls:[void 0]},l=[{value:"Report Findings and Fixes",id:"report-findings-and-fixes",level:2},{value:"Introducing the Backstage Threat Model",id:"introducing-the-backstage-threat-model",level:2},{value:"Links and References",id:"links-and-references",level:2}],p={toc:l};function f(e){var{components:t}=e,i=o(e,["components"]);return(0,n.kt)("wrapper",a({},p,i,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"TL;DR")," Backstage\u2019s security posture continues to mature! Today, we\u2019re releasing a report from an independent security audit and the first version of the Backstage Threat Model."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Backstage Security Audit &amp; Updates",src:r(879460).Z,width:"1200",height:"630"})),(0,n.kt)("p",null,"As an ",(0,n.kt)("a",a({parentName:"p"},{href:"https://www.cncf.io/blog/2022/03/15/backstage-project-joins-the-cncf-incubator/"}),"Incubating project")," within the ",(0,n.kt)("a",a({parentName:"p"},{href:"https://www.cncf.io/"}),"Cloud Native Computing Foundation (CNCF)"),", Backstage was fortunate enough to take advantage of a sponsored security audit. The ",(0,n.kt)("a",a({parentName:"p"},{href:"https://ostif.org/"}),"Open Source Technology Improvement Fund (OSTIF)")," sponsored the audit as part of its ongoing efforts to secure the open source software ecosystem, and the audit itself was performed by ",(0,n.kt)("a",a({parentName:"p"},{href:"https://x41-dsec.de/"}),"X41 D-Sec"),". Our goal with the audit was to evaluate and improve Backstage\u2019s security posture, focusing on the core Backstage framework and plugins."),(0,n.kt)("h2",a({},{id:"report-findings-and-fixes"}),"Report Findings and Fixes"),(0,n.kt)("p",null,"The security audit and improvements concluded earlier this month, on August 18th. The audit ",(0,n.kt)("strong",{parentName:"p"},"findings")," totalled two critical, two high, five medium, and three low severity vulnerabilities, alongside 15 side findings with no direct security impact. As of the ",(0,n.kt)("a",a({parentName:"p"},{href:"https://backstage.io/docs/releases/v1.5.0"}),"Backstage 1.5 release"),", eight out of the 12 main findings and many of the side findings are fully remedied. If you are a few versions behind there\u2019s no need to worry though, most fixes were included in the 1.3 release."),(0,n.kt)("p",null,"Out of the four findings that have yet to be fixed, three are related to rate limiting or internal DoS concerns. With the introduction of the Backstage Threat Model (more on that below), Backstage\u2019s positioning states that this is outside the scope of the security concerns of Backstage. Rather, we trust internal users of Backstage to not intentionally sabotage the availability of the service. This is not to say that we will never aim to get these findings addressed, but we have pushed them to be potential future improvements as we focus our near-term efforts on improving the product in other ways."),(0,n.kt)("p",null,"The last outstanding finding is to build out the capabilities of our service-to-service auth system. This is an area where the audit identified a couple of missing pieces in our early version of the implementation. We have since closed the gap by introducing token expiration, and will continue to work on this as we open up for more complex and hardened deployment patterns through the ",(0,n.kt)("a",a({parentName:"p"},{href:"https://github.com/backstage/backstage/issues/11611"}),"evolution of the backend system"),"."),(0,n.kt)("p",null,"Another important finding was the potential for confusion and user impersonation due to most authentication providers having sign-in enabled by default. This finding reinforced our decision to switch sign-in to being disabled by default for all authentication providers, which was part of the ",(0,n.kt)("a",a({parentName:"p"},{href:"https://backstage.io/docs/releases/v1.1.0"}),"1.1 release"),"."),(0,n.kt)("p",null,"Perhaps the most important outcome of this audit is that it helped us focus our efforts to keep improving the security of Backstage. It identified priority areas in both implementation and documentation for us going forward. One particular area that was pointed out in a finding is the documentation around the security model of Backstage deployment. There have been several efforts to highlight this in documentation, but it is still not clear enough. What we\u2019ve been lacking is documentation that is completely dedicated towards detailing the security concerns of Backstage. That is why in addition to publishing the security audit report, we are also introducing the ",(0,n.kt)("a",a({parentName:"p"},{href:"https://backstage.io/docs/overview/threat-model"}),"Backstage Threat Model"),"."),(0,n.kt)("h2",a({},{id:"introducing-the-backstage-threat-model"}),"Introducing the Backstage Threat Model"),(0,n.kt)("p",null,"The existing Backstage documentation has many security concerns interwoven within its text, but to find them all, you need to spend a lot of time reading. We previously lacked a one-stop-shop for readers that are interested in the security model and concerns of Backstage. So, we are happy to introduce the ",(0,n.kt)("a",a({parentName:"p"},{href:"https://backstage.io/docs/overview/threat-model"}),"Backstage Threat Model"),", which closes this gap. The Threat Model outlines key security considerations for operators, developers, and security researchers. It is a living document that will evolve and expand alongside the Backstage project."),(0,n.kt)("p",null,"The threat model document covers the trust model and roles involved in a typical Backstage setup, the responsibilities that fall on integrators of Backstage, and common configuration concerns across all Backstage projects. Beyond these three topics, it also dives deeper into a number of core features. The ",(0,n.kt)("inlineCode",{parentName:"p"},"auth"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"catalog"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"scaffolder"),", and ",(0,n.kt)("inlineCode",{parentName:"p"},"techdocs")," plugins are all covered separately with their individual security concerns."),(0,n.kt)("p",null,"We\u2019d like to point out a few key parts in case you are in a rush. Be sure to familiarize yourself with the integrator's responsibility to protect the Backstage installation from unauthorized access. If you ingest organizational data into the catalog and use that to sign in users, you\u2019ll also want to check out the first halves of the authentication and catalog sections."),(0,n.kt)("h2",a({},{id:"links-and-references"}),"Links and References"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{target:"_blank",href:r(28505).Z},"Full Audit Report")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",a({parentName:"li"},{href:"https://github.com/backstage/backstage/blob/master/SECURITY.md"}),"Backstage Security Policy"))),(0,n.kt)("p",null,"On behalf of the Backstage maintainers and community: thanks to the CNCF, OSTIF, and X41 D-Sec for the opportunity to improve the project."))}f.isMDXComponent=!0},879460:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/backstage-security-audit-d0283e8fb2fc980642fd9b4be7057cf5.png"},862525:e=>{var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(a){return!1}}()?Object.assign:function(e,o){for(var i,s,c=a(e),u=1;u<arguments.length;u++){for(var l in i=Object(arguments[u]))r.call(i,l)&&(c[l]=i[l]);if(t){s=t(i);for(var p=0;p<s.length;p++)n.call(i,s[p])&&(c[s[p]]=i[s[p]])}}return c}},541535:(e,t,r)=>{var n=r(862525),a=60103,o=60106;var i=60109,s=60110,c=60112;var u=60115,l=60116;if("function"==typeof Symbol&&Symbol.for){var p=Symbol.for;a=p("react.element"),o=p("react.portal"),p("react.fragment"),p("react.strict_mode"),p("react.profiler"),i=p("react.provider"),s=p("react.context"),c=p("react.forward_ref"),p("react.suspense"),u=p("react.memo"),l=p("react.lazy")}var f="function"==typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g={};function y(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||h}function m(){}function b(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||h}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=y.prototype;var k=b.prototype=new m;k.constructor=b,n(k,y.prototype),k.isPureReactComponent=!0;var v={current:null},w=Object.prototype.hasOwnProperty,O={key:!0,ref:!0,__self:!0,__source:!0};function j(e,t,r){var n,o={},i=null,s=null;if(null!=t)for(n in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)w.call(t,n)&&!O.hasOwnProperty(n)&&(o[n]=t[n]);var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){for(var u=Array(c),l=0;l<c;l++)u[l]=arguments[l+2];o.children=u}if(e&&e.defaultProps)for(n in c=e.defaultProps)void 0===o[n]&&(o[n]=c[n]);return{$$typeof:a,type:e,key:i,ref:s,props:o,_owner:v.current}}function T(e){return"object"==typeof e&&null!==e&&e.$$typeof===a}var S=/\/+/g;function B(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function P(e,t,r,n,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case a:case o:c=!0}}if(c)return i=i(c=e),e=""===n?"."+B(c,0):n,Array.isArray(i)?(r="",null!=e&&(r=e.replace(S,"$&/")+"/"),P(i,t,r,"",(function(e){return e}))):null!=i&&(T(i)&&(i=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,r+(!i.key||c&&c.key===i.key?"":(""+i.key).replace(S,"$&/")+"/")+e)),t.push(i)),1;if(c=0,n=""===n?".":n+":",Array.isArray(e))for(var u=0;u<e.length;u++){var l=n+B(s=e[u],u);c+=P(s,t,r,l,i)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),u=0;!(s=e.next()).done;)c+=P(s=s.value,t,r,l=n+B(s,u++),i);else if("object"===s)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return c}function x(e,t,r){if(null==e)return e;var n=[],a=0;return P(e,n,"","",(function(e){return t.call(r,e,a++)})),n}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var _={current:null};function C(){var e=_.current;if(null===e)throw Error(d(321));return e}},827378:(e,t,r)=>{r(541535)}}]);