<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">How to enable authentication in Backstage using Passport | Backstage Software Catalog and Developer Platform</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://backstage.io/img/sharing-opengraph.png"><meta data-rh="true" name="twitter:image" content="https://backstage.io/img/sharing-opengraph.png"><meta data-rh="true" property="og:url" content="https://backstage.io/blog/2020/07/01/how-to-enable-authentication-in-backstage-using-passport"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="How to enable authentication in Backstage using Passport | Backstage Software Catalog and Developer Platform"><meta data-rh="true" name="description" content="auth-landing-page"><meta data-rh="true" property="og:description" content="auth-landing-page"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2020-07-01T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/leemills83"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://backstage.io/blog/2020/07/01/how-to-enable-authentication-in-backstage-using-passport"><link data-rh="true" rel="alternate" href="https://backstage.io/blog/2020/07/01/how-to-enable-authentication-in-backstage-using-passport" hreflang="en"><link data-rh="true" rel="alternate" href="https://backstage.io/blog/2020/07/01/how-to-enable-authentication-in-backstage-using-passport" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://JCMFNHCHI8-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Backstage Software Catalog and Developer Platform RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Backstage Software Catalog and Developer Platform Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KSEVGGNCJW"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-KSEVGGNCJW",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Backstage Software Catalog and Developer Platform" href="/opensearch.xml">



<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Mono:500,700&display=swap">
<script src="https://buttons.github.io/buttons.js"></script>
<script src="https://unpkg.com/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script>
<script src="/js/medium-zoom.js"></script>
<script src="/js/dismissable-banner.js"></script>
<script src="/js/scroll-nav-to-view-in-docs.js"></script><link rel="stylesheet" href="/assets/css/styles.1f0a8695.css">
<link rel="preload" href="/assets/js/runtime~main.1f7d8af6.js" as="script">
<link rel="preload" href="/assets/js/main.8adca89b.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Backstage Software Catalog and Developer Platform" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="Backstage Software Catalog and Developer Platform" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a href="https://github.com/backstage/backstage" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a class="navbar__item navbar__link" href="/docs/overview/what-is-backstage">Docs</a><a class="navbar__item navbar__link" href="/plugins">Plugins</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/docs/releases/v1.11.0">Releases</a><a class="navbar__item navbar__link" href="/demos">Demos</a><a class="navbar__item navbar__link" href="/community">Community</a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/02/15/backend-system-alpha">Backstage Backend System Alpha</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/02/06/whats-ahead-in-2023">What’s Ahead in 2023?</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/01/31/incremental-entity-provider">Scaling Backstage Ingestion with Incremental Entity Providers</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/12/19/backstage-wrapped-2022">Backstage Wrapped 2022</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/11/15/linux-foundation-introduction-to-backstage-course">The Linux Foundation launches its Introduction to Backstage course</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">How to enable authentication in Backstage using Passport</h1><div class="container_mt6G margin-vert--md"><time datetime="2020-07-01T00:00:00.000Z" itemprop="datePublished">July 1, 2020</time> · <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/leemills83" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars1.githubusercontent.com/u/1236238?s=460&amp;v=4" alt="Lee Mills, Spotify"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/leemills83" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Lee Mills, Spotify</span></a></div></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p><img loading="lazy" alt="auth-landing-page" src="/assets/images/auth-landing-36c55882496255abe67830e1ea6db2ea.png" width="1548" height="622" class="img_ev3q"></p><p>Getting authentication right is important. It helps keep your platform safe, it’s one of the first things users will interact with, and there are many different authentication providers to support. To this end, we chose to use <a href="http://www.passportjs.org/" target="_blank" rel="noopener noreferrer">Passport</a> to provide an easy-to-use, out-of-the-box experience that can be extended to your own, pre-existing authentication providers (known as strategies). The Auth APIs in Backstage serve two purposes: identify the user and provide a way for plugins to request access to third-party services on behalf of the user. We’ve already implemented Google and GitHub authentication to provide examples and to get you started.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-passport">What is Passport?<a href="#what-is-passport" class="hash-link" aria-label="Direct link to What is Passport?" title="Direct link to What is Passport?">​</a></h2><p><a href="http://www.passportjs.org/" target="_blank" rel="noopener noreferrer">Passport</a> is Express-compatible authentication middleware for Node.js that provides access to over 500 authentication providers, covering everything from Google, Facebook, and Twitter to generic OAuth, SAML, and local. Check out all of the currently available <a href="http://www.passportjs.org/" target="_blank" rel="noopener noreferrer">strategies listed on the Passport site</a>.</p><p>Passport has allowed us to leverage an existing open-source authentication framework that will, in turn, give users the freedom to add and extend alternative authentication strategies to their instance of Backstage.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-authentication-in-backstage">Using authentication in Backstage<a href="#using-authentication-in-backstage" class="hash-link" aria-label="Direct link to Using authentication in Backstage" title="Direct link to Using authentication in Backstage">​</a></h2><p><img loading="lazy" alt="auth-landing-page" src="/assets/images/auth-sidebar-7757b6f66cada94c378abb527b01859a.png" width="206" height="185" class="img_ev3q"></p><p>First, check out the provided Google and GitHub implementations! <a href="https://backstage.io/blog/2020/04/30/how-to-quickly-set-up-backstage" target="_blank" rel="noopener noreferrer">Spin up a local copy of Backstage</a> along with our example-backend. You can find more documentation on setting up the example backend <a href="https://github.com/backstage/backstage/tree/master/packages/backend" target="_blank" rel="noopener noreferrer">here</a>, but be sure to include the relevant client IDs and secrets when running <code>yarn start</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">AUTH_GOOGLE_CLIENT_ID=x AUTH_GOOGLE_CLIENT_SECRET=x AUTH_GITHUB_CLIENT_ID=x AUTH_GITHUB_CLIENT_SECRET=x SENTRY_TOKEN=x LOG_LEVEL=debug yarn start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can find the implementation for these strategies along with a lightweight proof-of-concept implementation for SAML authentication at <code>&lt;root&gt;/plugins/auth-backend/src/providers</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ready-to-get-started-by-adding-your-chosen-provider-and-implementation">Ready to get started by adding your chosen provider and implementation?<a href="#ready-to-get-started-by-adding-your-chosen-provider-and-implementation" class="hash-link" aria-label="Direct link to Ready to get started by adding your chosen provider and implementation?" title="Direct link to Ready to get started by adding your chosen provider and implementation?">​</a></h2><p>Getting started is really straightforward, and can be broadly broken down into five steps:</p><ol><li>Install the <a href="http://www.passportjs.org/" target="_blank" rel="noopener noreferrer">Passport-based provider package that best suits your needs</a>.</li><li>Add a new provider to <code>plugins/auth-backend/src/providers/</code></li><li>Implement the provider, extending the suitable framework, if needed.</li><li>Add the provider to the backend.</li><li>Add a frontend Auth Utility API.</li></ol><p>For full details, take a look at our <a href="/docs/auth/add-auth-provider">“Adding authentication providers” documentation</a> and at the <a href="http://www.passportjs.org/docs/" target="_blank" rel="noopener noreferrer">excellent documentation</a> provided by Passport.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="interested-in-contributing-to-the-next-steps-for-authentication">Interested in contributing to the next steps for authentication?<a href="#interested-in-contributing-to-the-next-steps-for-authentication" class="hash-link" aria-label="Direct link to Interested in contributing to the next steps for authentication?" title="Direct link to Interested in contributing to the next steps for authentication?">​</a></h2><p>We’ve already seen both GitLab and Okta contributions from the community — and we’re thinking about a few more providers we’d like to add to Backstage, too. You can find those, and other authentication-related issues, in our repository by filtering with the <a href="https://github.com/backstage/backstage/issues?q=is%3Aissue+is%3Aopen+label%3Aauth" target="_blank" rel="noopener noreferrer">auth label</a>.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/2020/08/05/announcing-backstage-software-templates"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Announcing Backstage Software Templates</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/2020/06/22/backstage-service-catalog-alpha"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Backstage Service Catalog released in alpha</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-passport" class="table-of-contents__link toc-highlight">What is Passport?</a></li><li><a href="#using-authentication-in-backstage" class="table-of-contents__link toc-highlight">Using authentication in Backstage</a></li><li><a href="#ready-to-get-started-by-adding-your-chosen-provider-and-implementation" class="table-of-contents__link toc-highlight">Ready to get started by adding your chosen provider and implementation?</a></li><li><a href="#interested-in-contributing-to-the-next-steps-for-authentication" class="table-of-contents__link toc-highlight">Interested in contributing to the next steps for authentication?</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a href="/"><h2 class="footerLogo"></h2></a></li></ul></div><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/overview/what-is-backstage">What is Backstage?</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/">Getting started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/features/software-catalog/">Software Catalog</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/plugins/create-a-plugin">Create a Plugin</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/dls/design">Designing for Backstage</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/backstage-687207715902193673" target="_blank" rel="noopener noreferrer" class="footer__link-item">Support chatroom</a></li><li class="footer__item"><a href="https://github.com/backstage/backstage/blob/master/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contributing</a></li><li class="footer__item"><a href="https://backstage.spotify.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Adopting</a></li><li class="footer__item"><a href="https://mailchi.mp/spotify/backstage-community" target="_blank" rel="noopener noreferrer" class="footer__link-item">Subscribe to our newsletter</a></li><li class="footer__item"><a href="https://www.cncf.io/projects/" target="_blank" rel="noopener noreferrer" class="footer__link-item">CNCF Incubation</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://spotify.github.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Open Source @ Spotify</a></li><li class="footer__item"><a href="https://engineering.atspotify.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Spotify Engineering Blog</a></li><li class="footer__item"><a href="https://developer.spotify.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Spotify for Developers</a></li><li class="footer__item"><a href="https://github.com/backstage/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><p style="text-align:center"><a href="https://spotify.github.io/">Made with ❤️ at Spotify</a></p><p class="copyright">Copyright © 2022 Backstage Project Authors. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our Trademark Usage page: https://www.linuxfoundation.org/trademark-usage</p></div></div></div></footer></div>
<script src="/assets/js/runtime~main.1f7d8af6.js"></script>
<script src="/assets/js/main.8adca89b.js"></script>
</body>
</html>